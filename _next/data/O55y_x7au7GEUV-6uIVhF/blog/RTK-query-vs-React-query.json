{"pageProps":{"frontmatter":{"title":"RTK Query vs React Query","date":"July 13, 2023","excerpt":"RTK Query and React Query: Powerhouse Solutions for State Management in the React Ecosystem","cover_image":"/images/posts/rtk_query_vs_react_query/RTK-query-header.png","author":"Shameen Jamil"},"slug":"RTK-query-vs-React-query","content":"\r\n#### What is RTK query?\r\n\r\nRTK Query is a powerful data fetching and caching tool. It is designed to simplify common cases for loading data in a web application, eliminating the need to hand-write data fetching & caching logic yourself. RTK Query is an optional addon included in the Redux Toolkit package, and its functionality is built on top of the other APIs in Redux Toolkit. The Redux core has always been very minimal - it's up to developers to write all the actual logic. That means that Redux has never included anything built in to help solve these use cases. The Redux docs have taught some common patterns for dispatching actions around the request lifecycle to track loading state and request results, and Redux Toolkit's createAsyncThunk API was designed to abstract that typical pattern. However, users still have to write significant amounts of reducer logic to manage the loading state and the cached data.\r\n\r\n#### Pros of RTK Query:\r\n\r\n <div style=\"margin: 20px;\">\r\n  - <b>_Caching and Normalization:_</b> RTK Query provides built-in caching mechanisms to optimize data fetching. It automatically caches API responses and performs intelligent cache invalidation based on the data dependencies.\r\n  - <b>_Automatic Background Refetching:_</b> RTK Query automatically handles background refetching to ensure your data stays up to date. It can automatically refetch data in the background at configurable intervals or when specific data dependencies change.\r\n  - <b>_Automatic Background Refetching:_</b> RTK Query automatically handles background refetching to ensure your data stays up to date. It can automatically refetch data in the background at configurable intervals or when specific data dependencies change.\r\n  - <b>_Integration with Redux Toolkit:_</b> RTK Query integrates seamlessly with Redux Toolkit, leveraging its store, reducers, and middleware. It follows the principles and patterns of Redux Toolkit, making it easy to adopt and integrate into existing Redux applications.\r\n</div>\r\n#### Cons of RTK Query:\r\n\r\n <div style=\"margin: 20px;\">\r\n- <b>_Limited to use with Redux: _</b> Unlike other data management solutions, RTK Query can only be used in combination with Redux, thus decreasing its overall adaptability.\r\n\r\n- <b>_Steep learning curve for developers new to Redux:_</b> For developers who are not already familiar with Redux, learning RTK Query may require a steeper learning curve because it requires an understanding of Redux concepts and patterns.\r\n\r\n- <b>_Performance Trade-offs:_</b> RTK Query's automatic caching and background refetching can provide significant performance benefits. However, in certain scenarios with large data sets or complex data relationships, the caching behavior may not be optimal. It's important to carefully configure and test the caching settings to ensure optimal performance for your specific use case.\r\n</div>\r\n\r\n<b>This is how we create API Service using createAPI hook</b>\r\n\r\n```javascript\r\n\r\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\r\nexport const exampleApi = createApi({\r\n  reducerPath: 'exampleApi',\r\n  baseQuery: fetchBaseQuery({ baseUrl: 'https://example.com/api/' }),\r\n  endpoints: (builder) => ({\r\n    getUserByName: builder.query < User, string> ({\r\n      query: (name) => `user/all`,\r\n    }),\r\n  }),\r\n})\r\n```\r\n\r\n#### What is react query?\r\n\r\nReact Query is a ReactJS preconfigured data management library which gives you power and control over server-side state management, fetching, and caching of data, and error handling in a simple and declarative way without affecting the global state of your application. React Query handles caching, background updates and stale data out of the box with zero-configuration. There's no global state to manage, reducers, normalization systems or heavy configurations to understand. It comes wired up with dedicated devtools, infinite-loading APIs, and first class mutation tools that make updating your data a breeze.\r\n\r\n#### Pros of react query:\r\n\r\n <div style=\"margin: 20px;\">\r\n\r\n- <b>_Simplified Data Fetching:_</b> React Query simplifies the process of fetching and managing data by providing a declarative and intuitive API. It abstracts away the complexities of making network requests, handling loading and error states, and managing data caching and synchronization.\r\n\r\n- <b>_Automatic caching:_</b> React Query accelerates data retrieval and optimizes network requests by utilizing an automated caching system.\r\n\r\n- <b>_Customization:_</b> React query provides useMutation hook that provides data creation, edition and deletion.\r\n\r\n- <b>_Optimized Query Management:_</b> React-query works best with pagination as well as fetching and re-fetching data on background. React Query optimizes query management by providing features like query deduplication, query batching, and smart query invalidation.\r\n</div>\r\n\r\n#### Cons of react query:\r\n\r\n <div style=\"margin: 20px;\">\r\n\r\n- <b>_Limited functionality:_</b> React Query is focused on fetching and managing data from APIs, so it may not be suitable for more complex state management needs.\r\n\r\n- <b>_Smaller community:_</b> Relatively new and may have a smaller community and ecosystem compared to other libraries.\r\n </div>\r\nHere is an example of react query:\r\n\r\n```javascript\r\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query'\r\nconst queryClient = new QueryClient()\r\nexport default function App() {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <Example />\r\n    </QueryClientProvider>\r\n  )\r\n}\r\nfunction Example() {\r\n  const { isLoading, error, data } = useQuery('repoData', () =>\r\n    fetch('https://api.github.com/repos/tannerlinsley/react-query').then(\r\n      (res) => res.json()\r\n    )\r\n  )\r\n  if (isLoading) return 'Loading...'\r\n  if (error) return 'An error has occurred: ' + error.message\r\n  return (\r\n    <div>\r\n      <h1>{data.name}</h1>\r\n      <p>{data.description}</p>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\n<br>\r\n\r\n#### Conclusion:\r\n\r\nIf your application is more extensive and complex and needs complex state management, RTK is a better choice. If you are building a small, simple application and want to minimize the amount of boilerplate code, React Query may be the way to go.\r\nReact query is faster than RTK because of it small size but RTK provides excellent features for performance improvement.\r\nReact Query uses a manual cached key for invalidation and caches by user-defined query keys, while RTK Query uses declarative data invalidations and creates cache keys via endpoints and arguments.\r\nAt the end, it totally depends on you if you want to use redux go for RTK but if your project is simple go for react query.\r\n"},"__N_SSG":true}